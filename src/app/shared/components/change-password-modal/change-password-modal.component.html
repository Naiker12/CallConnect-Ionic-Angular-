<ion-header>
  <ion-toolbar>
    <ion-title>Cambiar contraseña</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="dismiss()">
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="gradient-header"></div>
  <div class="gradient-footer"></div>
  
  <div class="main-container">
    <div *ngIf="!resetSent" class="password-card">
      <p class="instructions">
        Para cambiar tu contraseña, ingresa tu dirección de correo electrónico.
        Te enviaremos un enlace para crear una nueva contraseña.
      </p>
      
      <form [formGroup]="passwordForm" (ngSubmit)="sendResetLink()">
        <ion-item>
          <ion-label position="floating">Correo electrónico</ion-label>
          <ion-input formControlName="email" type="email" placeholder="ejemplo@correo.com"></ion-input>
          <ion-note slot="error" *ngIf="passwordForm.get('email')?.touched && passwordForm.get('email')?.hasError('required')">
            El correo electrónico es obligatorio
          </ion-note>
          <ion-note slot="error" *ngIf="passwordForm.get('email')?.touched && passwordForm.get('email')?.hasError('email')">
            Ingresa un correo electrónico válido
          </ion-note>
        </ion-item>
        
        <ion-button class="send-button" expand="block" type="submit" [disabled]="passwordForm.invalid || isSubmitting">
          <ion-spinner name="crescent" *ngIf="isSubmitting"></ion-spinner>
          <span *ngIf="!isSubmitting">Enviar enlace</span>
        </ion-button>
      </form>
    </div>
    
    <div *ngIf="resetSent" class="password-card">
      <div class="success-container">
        <ion-icon name="mail-outline" class="success-icon"></ion-icon>
        <h2>¡Correo enviado!</h2>
        <p>
          Hemos enviado un enlace a tu correo electrónico para restablecer tu contraseña.
          Por favor, revisa tu bandeja de entrada y sigue las instrucciones.
        </p>
        <ion-button class="close-button" (click)="dismiss()">
          Cerrar
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>